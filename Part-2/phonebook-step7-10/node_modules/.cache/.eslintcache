[{"/home/the_last_crusaderr/Desktop/FullStackOpen/Part-2/phonebook-step7-10/src/index.js":"1","/home/the_last_crusaderr/Desktop/FullStackOpen/Part-2/phonebook-step7-10/src/App.js":"2","/home/the_last_crusaderr/Desktop/FullStackOpen/Part-2/phonebook-step7-10/src/services/persons.js":"3"},{"size":129,"mtime":1629092271000,"results":"4","hashOfConfig":"5"},{"size":3889,"mtime":1629353033594,"results":"6","hashOfConfig":"5"},{"size":667,"mtime":1629353033602,"results":"7","hashOfConfig":"5"},{"filePath":"8","messages":"9","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"yy5ndr",{"filePath":"10","messages":"11","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"12"},{"filePath":"13","messages":"14","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"15"},"/home/the_last_crusaderr/Desktop/FullStackOpen/Part-2/phonebook-step7-10/src/index.js",[],"/home/the_last_crusaderr/Desktop/FullStackOpen/Part-2/phonebook-step7-10/src/App.js",["16"],"import React, { useState, useEffect} from \"react\";\nimport axios from 'axios'\nimport {retrieve,remove,create,update} from './services/persons'\n\n\nconst Displayer = ({ searchString, persons, searchResult,setPersons }) => {\n\n  function handleDelete(person){\n      let result = window.confirm(`Do you want to delete ${person.name}`)\n      if (result === true) {\n        remove(person.id)\n        retrieve().then( (initialData) => setPersons(initialData)  )\n      }\n  }\n\n\n\n  if (searchString === \"\") {\n    return (\n      <>\n        <ul>\n          {persons.map((person) => (\n            <li key={person.name}>\n              {\" \"}\n              {person.name} {person.number}\n              <button onClick={() => handleDelete(person)}> Delete </button>\n            </li>\n          ))}\n        </ul>\n      </>\n    );\n  } else {\n    return (\n      <>\n        <ul>\n          {searchResult.map((search) => (\n            <li key={search.name}>\n              {\" \"}\n              {search.name} {search.number}\n              <button onClick={() => handleDelete(search)}> Delete </button>\n            </li>\n          ))}\n        </ul>\n      </>\n    );\n  }\n};\n\n\n\nconst App = () => {\n    \n    \n    \n    \n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState(\"\");\n  const [newNum, setNewNum] = useState(\"\");\n  const [searchString, setSearchString] = useState(\"\");\n  const [searchResult, setSearchResult] = useState([]);\n  \n  \n  \n  \n  // using the useEffect for fetching the data from server and setting it to the component after first rendering..\n    \n    useEffect( () => {\n        retrieve().then( (initialData) => setPersons(initialData)  )\n      }\n  , [])\n        \n         \n         \n         \n    \n    \n\n  function addName(event) {\n    //if trying to add the people in the phonebook\n    if (searchString === \"\") {\n      event.preventDefault();\n      const nameObject = {\n        name: newName,\n        number: newNum,\n        date: new Date(),\n        id: persons.length + 1\n      };\n\n      console.log(\"button clicked\", event.target);\n      if (persons.find((person) => person.name === nameObject.name) === undefined) {\n        create(nameObject)\n        retrieve().then( (initialData) => setPersons(initialData) )\n\n        //setPersons(persons.concat(nameObject));\n      }\n      else {\n          let result = window.confirm(`${nameObject.name}is already added to phonebook,replace the old number with new one`)\n          if(result === true) {\n            let oldPerson = persons.find((person) => person.name === nameObject.name)\n            let oldId = oldPerson.id\n            nameObject.id = oldId\n            update(nameObject,oldId)\n            retrieve().then((initialData) => setPersons(initialData))\n          }\n      }\n    }\n\n    //if searching on the phonebook\n    else {\n      event.preventDefault();\n      const searchArray = persons.filter(\n        (person) => person.name.toLowerCase().search(searchString.toLowerCase()) !== -1\n      );\n\n      setSearchResult(searchArray);\n    }\n  }\n\n  function handleNewName(event) {\n    setNewName(event.target.value);\n  }\n\n  function handleNewNum(event) {\n    setNewNum(event.target.value);\n  }\n\n  function handlesetSearchString(event) {\n    setSearchString(event.target.value);\n  }\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <form onSubmit={addName}>\n        filter shown with\n        <input value={searchString} onChange={handlesetSearchString} />\n        <h2>add a new</h2>\n        <div>\n          name: <input value={newName} onChange={handleNewName} />\n        </div>\n        number: <input value={newNum} onChange={handleNewNum} />\n        <br />\n        <button type=\"submit\">add</button>\n      </form>\n\n      <Displayer\n        searchString={searchString}\n        persons={persons}\n        searchResult={searchResult}\n        setPersons = {setPersons}\n      />\n    </div>\n  );\n};\n\nexport default App;\n","/home/the_last_crusaderr/Desktop/FullStackOpen/Part-2/phonebook-step7-10/src/services/persons.js",["17"],"import axios from 'axios'\nconst baseURL = 'http://localhost:3002/persons'\n\n\n\n\n\n   function create(newObject) {\n       const request = axios.post(baseURL, newObject)\n       return request.then((response) => response.data)\n   }\n\n\n function retrieve(){\n        const request = axios.get(baseURL)\n        return request.then (  (response)  => response.data)\n}\n\n\n function remove (id) {\n    const promise = axios.delete(`${baseURL}/${id}`)\n}\n\n\n    function update(newObject,id){\n        const request = axios.put( `${baseURL}/${id}`,newObject)\n        return request.then( response => response.data   )\n    }\n\n\n\nexport {\n    create,\n    retrieve,\n    remove,\n    update\n}\n",{"ruleId":"18","severity":1,"message":"19","line":2,"column":8,"nodeType":"20","messageId":"21","endLine":2,"endColumn":13},{"ruleId":"18","severity":1,"message":"22","line":21,"column":11,"nodeType":"20","messageId":"21","endLine":21,"endColumn":18},"no-unused-vars","'axios' is defined but never used.","Identifier","unusedVar","'promise' is assigned a value but never used."]