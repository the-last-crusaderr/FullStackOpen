{"ast":null,"code":"import _slicedToArray from\"/home/the_last_crusaderr/Desktop/FullStackOpen/Part-2/phonebook-step11-12/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import axios from'axios';import{retrieve,remove,create,update}from'./services/persons';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Notification=function Notification(_ref){var message=_ref.message;if(message===null)return null;return/*#__PURE__*/_jsx(\"div\",{className:\"coloring\",children:message});};var Displayer=function Displayer(_ref2){var searchString=_ref2.searchString,persons=_ref2.persons,searchResult=_ref2.searchResult,setPersons=_ref2.setPersons;function handleDelete(person){var result=window.confirm(\"Do you want to delete \".concat(person.name));if(result===true){remove(person.id);retrieve().then(function(initialData){return setPersons(initialData);});}}if(searchString===\"\"){return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"ul\",{children:persons.map(function(person){return/*#__PURE__*/_jsxs(\"li\",{children:[\" \",person.name,\" \",person.number,/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return handleDelete(person);},children:\" Delete \"})]},person.name);})})});}else{return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"ul\",{children:searchResult.map(function(search){return/*#__PURE__*/_jsxs(\"li\",{children:[\" \",search.name,\" \",search.number,/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return handleDelete(search);},children:\" Delete \"})]},search.name);})})});}};var App=function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),persons=_useState2[0],setPersons=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),newName=_useState4[0],setNewName=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),newNum=_useState6[0],setNewNum=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),searchString=_useState8[0],setSearchString=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),searchResult=_useState10[0],setSearchResult=_useState10[1];var _useState11=useState(null),_useState12=_slicedToArray(_useState11,2),notif=_useState12[0],setNotif=_useState12[1];// using the useEffect for fetching the data from server and setting it to the component after first rendering..\nuseEffect(function(){retrieve().then(function(initialData){return setPersons(initialData);});},[]);function addName(event){//if trying to add the people in the phonebook\nif(searchString===\"\"){event.preventDefault();var nameObject={name:newName,number:newNum,date:new Date(),id:persons.length+1};console.log(\"button clicked\",event.target);if(persons.find(function(person){return person.name===nameObject.name;})===undefined){var newData=create(nameObject).then(function(person){return setNotif(\"\".concat(person.name,\" is added\"));});retrieve().then(function(initialData){return setPersons(initialData);});//setPersons(persons.concat(nameObject));\n}else{var result=window.confirm(\"\".concat(nameObject.name,\"is already added to phonebook,replace the old number with new one\"));if(result===true){var oldPerson=persons.find(function(person){return person.name===nameObject.name;});var oldId=oldPerson.id;nameObject.id=oldId;update(nameObject,oldId);retrieve().then(function(initialData){return setPersons(initialData);});}}}//if searching on the phonebook\nelse{event.preventDefault();var searchArray=persons.filter(function(person){return person.name.toLowerCase().search(searchString.toLowerCase())!==-1;});setSearchResult(searchArray);}}function handleNewName(event){setNewName(event.target.value);}function handleNewNum(event){setNewNum(event.target.value);}function handlesetSearchString(event){setSearchString(event.target.value);}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Notification,{message:notif}),/*#__PURE__*/_jsx(\"h2\",{children:\"Phonebook\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:addName,children:[\"filter shown with\",/*#__PURE__*/_jsx(\"input\",{value:searchString,onChange:handlesetSearchString}),/*#__PURE__*/_jsx(\"h2\",{children:\"add a new\"}),/*#__PURE__*/_jsxs(\"div\",{children:[\"name: \",/*#__PURE__*/_jsx(\"input\",{value:newName,onChange:handleNewName})]}),\"number: \",/*#__PURE__*/_jsx(\"input\",{value:newNum,onChange:handleNewNum}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"add\"})]}),/*#__PURE__*/_jsx(Displayer,{searchString:searchString,persons:persons,searchResult:searchResult,setPersons:setPersons})]});};export default App;","map":{"version":3,"sources":["/home/the_last_crusaderr/Desktop/FullStackOpen/Part-2/phonebook-step11-12/src/App.js"],"names":["React","useState","useEffect","axios","retrieve","remove","create","update","Notification","message","Displayer","searchString","persons","searchResult","setPersons","handleDelete","person","result","window","confirm","name","id","then","initialData","map","number","search","App","newName","setNewName","newNum","setNewNum","setSearchString","setSearchResult","notif","setNotif","addName","event","preventDefault","nameObject","date","Date","length","console","log","target","find","undefined","newData","oldPerson","oldId","searchArray","filter","toLowerCase","handleNewName","value","handleNewNum","handlesetSearchString"],"mappings":"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","sourcesContent":["import React, { useState, useEffect} from \"react\";\nimport axios from 'axios'\nimport {retrieve,remove,create,update} from './services/persons'\n\n\n\n\n\nconst Notification = ({message}) => {\n  if(message === null)\n    return null\n\n  return (\n      <div className='coloring'>\n        {message}\n      </div>\n  )\n\n\n}\n\n\n\nconst Displayer = ({ searchString, persons, searchResult,setPersons }) => {\n\n  function handleDelete(person){\n      let result = window.confirm(`Do you want to delete ${person.name}`)\n      if (result === true) {\n        remove(person.id)\n        retrieve().then( (initialData) => setPersons(initialData)  )\n      }\n  }\n\n\n\n  if (searchString === \"\") {\n    return (\n      <>\n        <ul>\n          {persons.map((person) => (\n            <li key={person.name}>\n              {\" \"}\n              {person.name} {person.number}\n              <button onClick={() => handleDelete(person)}> Delete </button>\n            </li>\n          ))}\n        </ul>\n      </>\n    );\n  } else {\n    return (\n      <>\n        <ul>\n          {searchResult.map((search) => (\n            <li key={search.name}>\n              {\" \"}\n              {search.name} {search.number}\n              <button onClick={() => handleDelete(search)}> Delete </button>\n            </li>\n          ))}\n        </ul>\n      </>\n    );\n  }\n};\n\n\n\nconst App = () => {\n    \n    \n    \n    \n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState(\"\");\n  const [newNum, setNewNum] = useState(\"\");\n  const [searchString, setSearchString] = useState(\"\");\n  const [searchResult, setSearchResult] = useState([]);\n  const [notif,setNotif] = useState(null)\n  \n  \n  \n  \n  // using the useEffect for fetching the data from server and setting it to the component after first rendering..\n    \n    useEffect( () => {\n        retrieve().then( (initialData) => setPersons(initialData)  )\n      }\n  , [])\n\n    \n    \n\n  function addName(event) {\n    //if trying to add the people in the phonebook\n    if (searchString === \"\") {\n      event.preventDefault();\n      const nameObject = {\n        name: newName,\n        number: newNum,\n        date: new Date(),\n        id: persons.length + 1\n      };\n\n      console.log(\"button clicked\", event.target);\n      if (persons.find((person) => person.name === nameObject.name) === undefined) {\n        const newData = create(nameObject).then( (person) => setNotif( `${person.name} is added` ) )\n        retrieve().then( (initialData) => setPersons(initialData) )\n        //setPersons(persons.concat(nameObject));\n      }\n      else {\n          let result = window.confirm(`${nameObject.name}is already added to phonebook,replace the old number with new one`)\n          if(result === true) {\n            let oldPerson = persons.find((person) => person.name === nameObject.name)\n            let oldId = oldPerson.id\n            nameObject.id = oldId\n            update(nameObject,oldId)\n            retrieve().then((initialData) => setPersons(initialData))\n          }\n      }\n    }\n\n    //if searching on the phonebook\n    else {\n      event.preventDefault();\n      const searchArray = persons.filter(\n        (person) => person.name.toLowerCase().search(searchString.toLowerCase()) !== -1\n      );\n\n      setSearchResult(searchArray);\n    }\n  }\n\n  function handleNewName(event) {\n    setNewName(event.target.value);\n  }\n\n  function handleNewNum(event) {\n    setNewNum(event.target.value);\n  }\n\n  function handlesetSearchString(event) {\n    setSearchString(event.target.value);\n  }\n\n  return (\n    <div>\n      <Notification message={notif}/>\n      <h2>Phonebook</h2>\n      <form onSubmit={addName}>\n        filter shown with\n        <input value={searchString} onChange={handlesetSearchString} />\n        <h2>add a new</h2>\n        <div>\n          name: <input value={newName} onChange={handleNewName} />\n        </div>\n        number: <input value={newNum} onChange={handleNewNum} />\n        <br />\n        <button type=\"submit\">add</button>\n      </form>\n\n      <Displayer\n        searchString={searchString}\n        persons={persons}\n        searchResult={searchResult}\n        setPersons = {setPersons}\n      />\n    </div>\n  );\n};\n\nexport default App; \n"]},"metadata":{},"sourceType":"module"}