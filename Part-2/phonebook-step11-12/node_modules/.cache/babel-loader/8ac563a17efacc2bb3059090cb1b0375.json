{"ast":null,"code":"var _jsxFileName = \"/home/the_last_crusaderr/Desktop/FullStackOpen/Part-2/phonebook-step11-12/src/App.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport axios from 'axios';\nimport { retrieve, remove, create, update } from './services/persons';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst Notification = ({\n  message\n}) => {\n  if (message === null) return null;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"coloring\",\n    children: message\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 14,\n    columnNumber: 7\n  }, this);\n};\n\n_c = Notification;\n\nconst Displayer = ({\n  searchString,\n  persons,\n  searchResult,\n  setPersons\n}) => {\n  function handleDelete(person) {\n    let result = window.confirm(`Do you want to delete ${person.name}`);\n\n    if (result === true) {\n      remove(person.id);\n      retrieve().then(initialData => setPersons(initialData));\n    }\n  }\n\n  if (searchString === \"\") {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: persons.map(person => /*#__PURE__*/_jsxDEV(\"li\", {\n          children: [\" \", person.name, \" \", person.number, /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleDelete(person),\n            children: \" Delete \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 44,\n            columnNumber: 15\n          }, this)]\n        }, person.name, true, {\n          fileName: _jsxFileName,\n          lineNumber: 41,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 9\n      }, this)\n    }, void 0, false);\n  } else {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: searchResult.map(search => /*#__PURE__*/_jsxDEV(\"li\", {\n          children: [\" \", search.name, \" \", search.number, /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleDelete(search),\n            children: \" Delete \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 58,\n            columnNumber: 15\n          }, this)]\n        }, search.name, true, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 9\n      }, this)\n    }, void 0, false);\n  }\n};\n\n_c2 = Displayer;\n\nconst App = () => {\n  _s();\n\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState(\"\");\n  const [newNum, setNewNum] = useState(\"\");\n  const [searchString, setSearchString] = useState(\"\");\n  const [searchResult, setSearchResult] = useState([]);\n  const [notif, setNotif] = useState(null); // using the useEffect for fetching the data from server and setting it to the component after first rendering..\n\n  useEffect(() => {\n    retrieve().then(initialData => setPersons(initialData));\n  }, []);\n\n  function addName(event) {\n    //if trying to add the people in the phonebook\n    if (searchString === \"\") {\n      event.preventDefault();\n      const nameObject = {\n        name: newName,\n        number: newNum,\n        date: new Date(),\n        id: persons.length + 1\n      };\n      console.log(\"button clicked\", event.target);\n\n      if (persons.find(person => person.name === nameObject.name) === undefined) {\n        const newData = create(nameObject).then(person => setNotif(`${person.name} is added`));\n        retrieve().then(initialData => setPersons(initialData)); //setPersons(persons.concat(nameObject));\n      } else {\n        let result = window.confirm(`${nameObject.name}is already added to phonebook,replace the old number with new one`);\n\n        if (result === true) {\n          let oldPerson = persons.find(person => person.name === nameObject.name);\n          let oldId = oldPerson.id;\n          nameObject.id = oldId;\n          update(nameObject, oldId);\n          retrieve().then(initialData => setPersons(initialData));\n        }\n      }\n    } //if searching on the phonebook\n    else {\n      event.preventDefault();\n      const searchArray = persons.filter(person => person.name.toLowerCase().search(searchString.toLowerCase()) !== -1);\n      setSearchResult(searchArray);\n    }\n  }\n\n  function handleNewName(event) {\n    setNewName(event.target.value);\n  }\n\n  function handleNewNum(event) {\n    setNewNum(event.target.value);\n  }\n\n  function handlesetSearchString(event) {\n    setSearchString(event.target.value);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Notification, {\n      message: notif\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Phonebook\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: addName,\n      children: [\"filter shown with\", /*#__PURE__*/_jsxDEV(\"input\", {\n        value: searchString,\n        onChange: handlesetSearchString\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"add a new\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\"name: \", /*#__PURE__*/_jsxDEV(\"input\", {\n          value: newName,\n          onChange: handleNewName\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 9\n      }, this), \"number: \", /*#__PURE__*/_jsxDEV(\"input\", {\n        value: newNum,\n        onChange: handleNewNum\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        children: \"add\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Displayer, {\n      searchString: searchString,\n      persons: persons,\n      searchResult: searchResult,\n      setPersons: setPersons\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 147,\n    columnNumber: 5\n  }, this);\n};\n\n_s(App, \"4zcrDfpHep/NuFY5+HAYptV1njw=\");\n\n_c3 = App;\nexport default App;\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"Notification\");\n$RefreshReg$(_c2, \"Displayer\");\n$RefreshReg$(_c3, \"App\");","map":{"version":3,"sources":["/home/the_last_crusaderr/Desktop/FullStackOpen/Part-2/phonebook-step11-12/src/App.js"],"names":["React","useState","useEffect","axios","retrieve","remove","create","update","Notification","message","Displayer","searchString","persons","searchResult","setPersons","handleDelete","person","result","window","confirm","name","id","then","initialData","map","number","search","App","newName","setNewName","newNum","setNewNum","setSearchString","setSearchResult","notif","setNotif","addName","event","preventDefault","nameObject","date","Date","length","console","log","target","find","undefined","newData","oldPerson","oldId","searchArray","filter","toLowerCase","handleNewName","value","handleNewNum","handlesetSearchString"],"mappings":"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","sourcesContent":["import React, { useState, useEffect} from \"react\";\nimport axios from 'axios'\nimport {retrieve,remove,create,update} from './services/persons'\n\n\n\n\n\nconst Notification = ({message}) => {\n  if(message === null)\n    return null\n\n  return (\n      <div className='coloring'>\n        {message}\n      </div>\n  )\n\n\n}\n\n\n\nconst Displayer = ({ searchString, persons, searchResult,setPersons }) => {\n\n  function handleDelete(person){\n      let result = window.confirm(`Do you want to delete ${person.name}`)\n      if (result === true) {\n        remove(person.id)\n        retrieve().then( (initialData) => setPersons(initialData)  )\n      }\n  }\n\n\n\n  if (searchString === \"\") {\n    return (\n      <>\n        <ul>\n          {persons.map((person) => (\n            <li key={person.name}>\n              {\" \"}\n              {person.name} {person.number}\n              <button onClick={() => handleDelete(person)}> Delete </button>\n            </li>\n          ))}\n        </ul>\n      </>\n    );\n  } else {\n    return (\n      <>\n        <ul>\n          {searchResult.map((search) => (\n            <li key={search.name}>\n              {\" \"}\n              {search.name} {search.number}\n              <button onClick={() => handleDelete(search)}> Delete </button>\n            </li>\n          ))}\n        </ul>\n      </>\n    );\n  }\n};\n\n\n\nconst App = () => {\n    \n    \n    \n    \n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState(\"\");\n  const [newNum, setNewNum] = useState(\"\");\n  const [searchString, setSearchString] = useState(\"\");\n  const [searchResult, setSearchResult] = useState([]);\n  const [notif,setNotif] = useState(null)\n  \n  \n  \n  \n  // using the useEffect for fetching the data from server and setting it to the component after first rendering..\n    \n    useEffect( () => {\n        retrieve().then( (initialData) => setPersons(initialData)  )\n      }\n  , [])\n\n    \n    \n\n  function addName(event) {\n    //if trying to add the people in the phonebook\n    if (searchString === \"\") {\n      event.preventDefault();\n      const nameObject = {\n        name: newName,\n        number: newNum,\n        date: new Date(),\n        id: persons.length + 1\n      };\n\n      console.log(\"button clicked\", event.target);\n      if (persons.find((person) => person.name === nameObject.name) === undefined) {\n        const newData = create(nameObject).then( (person) => setNotif( `${person.name} is added` ) )\n        retrieve().then( (initialData) => setPersons(initialData) )\n        //setPersons(persons.concat(nameObject));\n      }\n      else {\n          let result = window.confirm(`${nameObject.name}is already added to phonebook,replace the old number with new one`)\n          if(result === true) {\n            let oldPerson = persons.find((person) => person.name === nameObject.name)\n            let oldId = oldPerson.id\n            nameObject.id = oldId\n            update(nameObject,oldId)\n            retrieve().then((initialData) => setPersons(initialData))\n          }\n      }\n    }\n\n    //if searching on the phonebook\n    else {\n      event.preventDefault();\n      const searchArray = persons.filter(\n        (person) => person.name.toLowerCase().search(searchString.toLowerCase()) !== -1\n      );\n\n      setSearchResult(searchArray);\n    }\n  }\n\n  function handleNewName(event) {\n    setNewName(event.target.value);\n  }\n\n  function handleNewNum(event) {\n    setNewNum(event.target.value);\n  }\n\n  function handlesetSearchString(event) {\n    setSearchString(event.target.value);\n  }\n\n  return (\n    <div>\n      <Notification message={notif}/>\n      <h2>Phonebook</h2>\n      <form onSubmit={addName}>\n        filter shown with\n        <input value={searchString} onChange={handlesetSearchString} />\n        <h2>add a new</h2>\n        <div>\n          name: <input value={newName} onChange={handleNewName} />\n        </div>\n        number: <input value={newNum} onChange={handleNewNum} />\n        <br />\n        <button type=\"submit\">add</button>\n      </form>\n\n      <Displayer\n        searchString={searchString}\n        persons={persons}\n        searchResult={searchResult}\n        setPersons = {setPersons}\n      />\n    </div>\n  );\n};\n\nexport default App; \n"]},"metadata":{},"sourceType":"module"}