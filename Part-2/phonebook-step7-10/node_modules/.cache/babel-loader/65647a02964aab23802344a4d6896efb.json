{"ast":null,"code":"var _jsxFileName = \"/home/the_last_crusaderr/Desktop/FullStackOpen/Part-2/phonebook-step7/src/App.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport axios from 'axios';\nimport { retrieve, remove, create, update } from './services/persons';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst Displayer = ({\n  searchString,\n  persons,\n  searchResult,\n  setPersons\n}) => {\n  function handleDelete(person) {\n    let result = window.confirm(`Do you want to delete ${person.name}`);\n\n    if (result === true) {\n      remove(person.id);\n      retrieve().then(initialData => setPersons(initialData));\n    }\n  }\n\n  if (searchString === \"\") {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: persons.map(person => /*#__PURE__*/_jsxDEV(\"li\", {\n          children: [\" \", person.name, \" \", person.number, /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleDelete(person),\n            children: \" Delete \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 26,\n            columnNumber: 15\n          }, this)]\n        }, person.name, true, {\n          fileName: _jsxFileName,\n          lineNumber: 23,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 21,\n        columnNumber: 9\n      }, this)\n    }, void 0, false);\n  } else {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: searchResult.map(search => /*#__PURE__*/_jsxDEV(\"li\", {\n          children: [\" \", search.name, \" \", search.number, /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleDelete(search),\n            children: \" Delete \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 40,\n            columnNumber: 15\n          }, this)]\n        }, search.name, true, {\n          fileName: _jsxFileName,\n          lineNumber: 37,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 35,\n        columnNumber: 9\n      }, this)\n    }, void 0, false);\n  }\n};\n\n_c = Displayer;\n\nconst App = () => {\n  _s();\n\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState(\"\");\n  const [newNum, setNewNum] = useState(\"\");\n  const [searchString, setSearchString] = useState(\"\");\n  const [searchResult, setSearchResult] = useState([]); // using the useEffect for fetching the data from server and setting it to the component after first rendering..\n\n  useEffect(() => {\n    retrieve().then(initialData => setPersons(initialData));\n  }, []);\n\n  function addName(event) {\n    //if trying to add the people in the phonebook\n    if (searchString === \"\") {\n      event.preventDefault();\n      const nameObject = {\n        name: newName,\n        number: newNum,\n        date: new Date(),\n        id: persons.length + 1\n      };\n      console.log(\"button clicked\", event.target);\n\n      if (persons.find(person => person.name === nameObject.name) === undefined) {\n        create(nameObject);\n        retrieve().then(initialData => setPersons(initialData)); //setPersons(persons.concat(nameObject));\n      } else {\n        let result = window.confirm(`${nameObject.name}is already added to phonebook,replace the old number with new one`);\n\n        if (result === true) {\n          update(nameObject, nameObject.id);\n          retrieve().then(initialData => setPersons(initialData));\n        }\n      }\n    } //if searching on the phonebook\n    else {\n      event.preventDefault();\n      const searchArray = persons.filter(person => person.name.toLowerCase().search(searchString.toLowerCase()) !== -1);\n      setSearchResult(searchArray);\n    }\n  }\n\n  function handleNewName(event) {\n    setNewName(event.target.value);\n  }\n\n  function handleNewNum(event) {\n    setNewNum(event.target.value);\n  }\n\n  function handlesetSearchString(event) {\n    setSearchString(event.target.value);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Phonebook\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: addName,\n      children: [\"filter shown with\", /*#__PURE__*/_jsxDEV(\"input\", {\n        value: searchString,\n        onChange: handlesetSearchString\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"add a new\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\"name: \", /*#__PURE__*/_jsxDEV(\"input\", {\n          value: newName,\n          onChange: handleNewName\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 9\n      }, this), \"number: \", /*#__PURE__*/_jsxDEV(\"input\", {\n        value: newNum,\n        onChange: handleNewNum\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        children: \"add\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Displayer, {\n      searchString: searchString,\n      persons: persons,\n      searchResult: searchResult,\n      setPersons: setPersons\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 129,\n    columnNumber: 5\n  }, this);\n};\n\n_s(App, \"peuh6sScJvqswqsRTcQOLkzmKro=\");\n\n_c2 = App;\nexport default App;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"Displayer\");\n$RefreshReg$(_c2, \"App\");","map":{"version":3,"sources":["/home/the_last_crusaderr/Desktop/FullStackOpen/Part-2/phonebook-step7/src/App.js"],"names":["React","useState","useEffect","axios","retrieve","remove","create","update","Displayer","searchString","persons","searchResult","setPersons","handleDelete","person","result","window","confirm","name","id","then","initialData","map","number","search","App","newName","setNewName","newNum","setNewNum","setSearchString","setSearchResult","addName","event","preventDefault","nameObject","date","Date","length","console","log","target","find","undefined","searchArray","filter","toLowerCase","handleNewName","value","handleNewNum","handlesetSearchString"],"mappings":"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","sourcesContent":["import React, { useState, useEffect} from \"react\";\nimport axios from 'axios'\nimport {retrieve,remove,create,update} from './services/persons'\n\n\nconst Displayer = ({ searchString, persons, searchResult,setPersons }) => {\n\n  function handleDelete(person){\n      let result = window.confirm(`Do you want to delete ${person.name}`)\n      if (result === true) {\n        remove(person.id)\n        retrieve().then( (initialData) => setPersons(initialData)  )\n      }\n  }\n\n\n\n  if (searchString === \"\") {\n    return (\n      <>\n        <ul>\n          {persons.map((person) => (\n            <li key={person.name}>\n              {\" \"}\n              {person.name} {person.number}\n              <button onClick={() => handleDelete(person)}> Delete </button>\n            </li>\n          ))}\n        </ul>\n      </>\n    );\n  } else {\n    return (\n      <>\n        <ul>\n          {searchResult.map((search) => (\n            <li key={search.name}>\n              {\" \"}\n              {search.name} {search.number}\n              <button onClick={() => handleDelete(search)}> Delete </button>\n            </li>\n          ))}\n        </ul>\n      </>\n    );\n  }\n};\n\n\n\nconst App = () => {\n    \n    \n    \n    \n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState(\"\");\n  const [newNum, setNewNum] = useState(\"\");\n  const [searchString, setSearchString] = useState(\"\");\n  const [searchResult, setSearchResult] = useState([]);\n  \n  \n  \n  \n  // using the useEffect for fetching the data from server and setting it to the component after first rendering..\n    \n    useEffect( () => {\n        retrieve().then( (initialData) => setPersons(initialData)  )\n      }\n  , [])\n        \n         \n         \n         \n    \n    \n\n  function addName(event) {\n    //if trying to add the people in the phonebook\n    if (searchString === \"\") {\n      event.preventDefault();\n      const nameObject = {\n        name: newName,\n        number: newNum,\n        date: new Date(),\n        id: persons.length + 1\n      };\n\n      console.log(\"button clicked\", event.target);\n      if (persons.find((person) => person.name === nameObject.name) === undefined) {\n        create(nameObject)\n        retrieve().then( (initialData) => setPersons(initialData) )\n\n        //setPersons(persons.concat(nameObject));\n      }\n      else {\n          let result = window.confirm(`${nameObject.name}is already added to phonebook,replace the old number with new one`)\n          if(result === true) {\n            update(nameObject, nameObject.id)\n            retrieve().then((initialData) => setPersons(initialData))\n          }\n      }\n    }\n\n    //if searching on the phonebook\n    else {\n      event.preventDefault();\n      const searchArray = persons.filter(\n        (person) => person.name.toLowerCase().search(searchString.toLowerCase()) !== -1\n      );\n\n      setSearchResult(searchArray);\n    }\n  }\n\n  function handleNewName(event) {\n    setNewName(event.target.value);\n  }\n\n  function handleNewNum(event) {\n    setNewNum(event.target.value);\n  }\n\n  function handlesetSearchString(event) {\n    setSearchString(event.target.value);\n  }\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <form onSubmit={addName}>\n        filter shown with\n        <input value={searchString} onChange={handlesetSearchString} />\n        <h2>add a new</h2>\n        <div>\n          name: <input value={newName} onChange={handleNewName} />\n        </div>\n        number: <input value={newNum} onChange={handleNewNum} />\n        <br />\n        <button type=\"submit\">add</button>\n      </form>\n\n      <Displayer\n        searchString={searchString}\n        persons={persons}\n        searchResult={searchResult}\n        setPersons = {setPersons}\n      />\n    </div>\n  );\n};\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}